# Foodbook

Foodbook - это REST API сервис для хранения и управления рецептами, подобный блокноту, но для кулинарных рецептов.

## Возможности

- Регистрация и аутентификация пользователей
- Создание, чтение, обновление и удаление рецептов
- Поиск и фильтрация рецептов

## Технологический стек

- FastAPI
- SQLite
- SQLAlchemy
- JWT аутентификация

## Установка

### Стандартная установка

1. Создание виртуального окружения:
```
python3.9 -m venv venv
```

2. Активация виртуального окружения:
```
source venv/bin/activate
```

3. Установка зависимостей:
```
pip install -r requirements.txt
```

4. Запуск сервера:
```
uvicorn app.main:app --reload
```

5. Инициализация примеров данных:
```
python init_db.py
```

6. Доступ к документации API по адресу http://localhost:8000/docs

### Установка с использованием Docker

1. Сборка и запуск контейнера:
```
docker-compose up -d
```

2. Инициализация примеров данных:
```
docker-compose exec foodbook python init_db.py
```

3. Доступ к документации API по адресу http://localhost:8000/docs

4. Остановка контейнера:
```
docker-compose down
```

## Тестирование

### Стандартное тестирование
Запуск тестов:
```
pytest
```

### Тестирование в Docker
Запуск тестов в Docker контейнере:
```
docker-compose exec foodbook python -m pytest
```

## Endpoints API

### Аутентификация
- `POST /token` - Получение токена доступа (вход)

### Пользователи
- `POST /users/` - Регистрация нового пользователя
- `GET /users/me` - Получение данных текущего пользователя
- `GET /users/` - Получение списка всех пользователей (требуется аутентификация)
- `GET /users/{user_id}` - Получение данных конкретного пользователя (требуется аутентификация)

### Рецепты
- `GET /recipes/` - Получение всех рецептов
- `GET /recipes/user/` - Получение рецептов текущего пользователя (требуется аутентификация)
- `GET /recipes/{recipe_id}` - Получение конкретного рецепта
- `POST /recipes/` - Создание рецепта (требуется аутентификация)
- `PUT /recipes/{recipe_id}` - Обновление рецепта (требуется аутентификация)
- `DELETE /recipes/{recipe_id}` - Удаление рецепта (требуется аутентификация)

## Команды Makefile

- `make install` - Настройка виртуального окружения и установка зависимостей
- `make run` - Запуск сервера разработки
- `make init` - Инициализация базы данных примерами
- `make test` - Запуск тестов
- `make test-v` - Запуск тестов с подробным выводом
- `make clean` - Очистка файлов базы данных 